<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第 10 章 函数 | LBJhui-blog</title>
    <meta name="description" content="A VitePress site">
    <meta name="generator" content="VitePress v1.5.0">
    <link rel="preload stylesheet" href="/LBJhui-blog/assets/style.CHpMK813.css" as="style">
    <link rel="preload stylesheet" href="/LBJhui-blog/vp-icons.css" as="style">
    
    <script type="module" src="/LBJhui-blog/assets/app.C78mU8ma.js"></script>
    <link rel="preload" href="/LBJhui-blog/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/framework.V6wbqQ68.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/theme.D8FbOre1.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/katex.NieGjnhU.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/dagre-4EVJKHTY.XbQdLV9s.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/c4Diagram-6F5ED5ID.BY6rQeTd.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/flowDiagram-7ASYPVHJ.BUNJP6fs.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/erDiagram-6RL3IURR.DgIYXJvZ.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/gitGraphDiagram-NRZ2UAAF.Dtm2ruqY.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/ganttDiagram-NTVNEXSI.DnnEG_p_.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/infoDiagram-A4XQUW5V.Cu5R9t6x.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/pieDiagram-YF2LJOPJ.DdgD6pDz.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/quadrantDiagram-OS5C2QUG.BNGDhAD1.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/xychartDiagram-6QU3TZC5.D5vl5ms2.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/requirementDiagram-MIRIMTAZ.B1oDSmOV.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/sequenceDiagram-G6AWOVSC.Dsdf9Tfm.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/classDiagram-LNE6IOMH.BBYlvGex.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/classDiagram-v2-MQ7JQ4JX.BBYlvGex.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/stateDiagram-MAYHULR4.NMdrU4TU.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/stateDiagram-v2-4JROLMXI.H0rYT-qx.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/journeyDiagram-G5WM74LC.BMUoNvIF.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/timeline-definition-U7ZMHBDA.womEdIG3.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/mindmap-definition-GWI6TPTV.Dvc9jJ5V.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/kanban-definition-QRCXZQQD.CMhXUdg3.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/sankeyDiagram-Y46BX6SQ.CBYNNmMk.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/diagram-QW4FP2JN.DWq7nUag.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/blockDiagram-ZHA2E4KO.DYAWO9yF.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/architectureDiagram-UYN6MBPD.C4NthtVp.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/chunks/virtual_mermaid-config.B9oicH2Z.js">
    <link rel="modulepreload" href="/LBJhui-blog/assets/website_language_JavaScript_High-Performance JavaScript_第10章 函数.md.B_Uwibq5.lean.js">
    <link rel="icon" href="/LBJhui-blog/my-logo.svg">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/LBJhui-blog/" data-v-1168a8e4><!--[--><!--]--><!--[--><img class="VPImage logo" src="/LBJhui-blog/my-logo.svg" alt data-v-8426fc1a><!--]--><span data-v-1168a8e4>LBJhui-blog</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/LBJhui-blog/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>首页</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>前端基础</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/LBJhui-blog/website/language/JavaScript/1.%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E(var,let%E5%92%8Cconst)" data-v-35975db6><!--[--><span data-v-35975db6>JavaScript</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/LBJhui-blog/website/language/Git/1.%E5%88%A0%E9%99%A4%E5%8E%86%E5%8F%B2%E6%89%80%E6%9C%89commit" data-v-35975db6><!--[--><span data-v-35975db6>Git</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>框架&库</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/LBJhui-blog/website/framework/browser&amp;network/1.%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8C%87%E7%BA%B9" data-v-35975db6><!--[--><span data-v-35975db6>浏览器和网络</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/LBJhui-blog/website/Leetcode/0.%20list" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Leetcode算法</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>更多</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/LBJhui-blog/website/more/python/1.python-pip%E6%BA%90" data-v-35975db6><!--[--><span data-v-35975db6>python</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/LBJhui-blog/website/more/bookmark" data-v-35975db6><!--[--><span data-v-35975db6>网址收藏</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/LBJhui/LBJhui-blog" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://blog.csdn.net/qq_36081714" aria-label target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><svg t="1721011213162" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2207" width="200" height="200"><path d="M512 1024C229.2224 1024 0 794.7776 0 512 0 229.2224 229.2224 0 512 0c282.7776 0 512 229.2224 512 512 0 282.7776-229.2224 512-512 512z m17.066667-413.525333c34.850133 4.352 68.778667 5.12 102.741333 2.0992 23.04-2.048 44.817067-8.362667 64.170667-21.9136 38.212267-26.794667 49.783467-85.1968 24.251733-123.050667-14.626133-21.7088-36.8128-30.344533-60.757333-35.498667-35.054933-7.543467-70.4512-5.751467-105.847467-3.413333-5.666133 0.3584-6.7584 3.072-7.236267 8.209067-3.072 32.682667-6.536533 65.314133-9.813333 97.962666-2.5088 24.814933-4.932267 49.629867-7.509333 75.605334z m53.4016-33.928534c1.962667-20.906667 3.6352-39.338667 5.4272-57.770666 1.553067-15.906133 3.413333-31.778133 4.727466-47.701334 0.3584-4.283733 1.553067-6.656 5.956267-6.382933 15.616 1.041067 31.709867 0.034133 46.728533 3.652267 36.488533 8.823467 48.725333 54.306133 23.3472 83.029333-15.8208 17.902933-36.7616 23.586133-59.255466 25.088-8.465067 0.546133-17.015467 0.085333-26.9312 0.085333zM512 434.295467c-2.184533-0.648533-3.5328-1.1776-4.932267-1.4336-37.717333-6.877867-75.690667-8.328533-113.646933-2.816-20.974933 3.037867-41.0112 9.489067-57.480533 23.330133-22.9888 19.319467-21.640533 46.848 4.4032 62.0032 13.056 7.594667 28.023467 12.509867 42.5984 17.288533 14.08 4.608 28.996267 6.826667 43.144533 11.264 12.5952 3.925333 14.011733 14.318933 3.584 22.306134-3.345067 2.56-7.441067 5.085867-11.537067 5.751466-11.195733 1.826133-22.698667 4.386133-33.826133 3.566934-24.098133-1.774933-48.042667-5.461333-72.5504-8.430934-1.365333 10.615467-2.935467 23.0912-4.5568 35.9424 4.181333 1.365333 7.68 2.730667 11.264 3.618134 33.9456 8.4992 68.386133 9.608533 102.912 5.12 20.087467-2.6112 39.4752-7.901867 56.695467-19.029334 28.603733-18.4832 36.693333-57.1904-4.676267-75.383466-14.506667-6.382933-30.190933-10.410667-45.482667-15.086934-11.4176-3.4816-23.313067-5.614933-34.525866-9.5232-9.7792-3.413333-11.144533-12.202667-3.037867-18.397866 4.6592-3.549867 10.717867-6.997333 16.384-7.3728a480.853333 480.853333 0 0 1 53.384533-0.853334c15.377067 0.699733 30.651733 3.549867 46.4896 5.5296L512 434.295467z m257.143467 2.048L750.933333 614.2976h54.152534c4.778667-45.636267 9.710933-90.7264 14.062933-135.8848 0.6144-6.365867 2.3552-8.840533 8.686933-9.0112 11.434667-0.273067 22.8864-1.979733 34.286934-1.570133 23.722667 0.853333 42.3936 9.728 38.4 43.264-2.901333 24.2688-5.597867 48.571733-8.2432 72.874666-1.092267 10.069333-1.826133 20.189867-2.730667 30.4128h55.330133c3.584-35.259733 7.9872-70.058667 10.496-104.994133 3.413333-47.4624-17.7664-73.3184-64.682666-80.213333-40.96-6.007467-81.339733-0.341333-121.5488 7.133866z m-483.498667 134.6048c-8.738133 1.297067-16.384 2.798933-24.098133 3.4816-25.6512 2.235733-51.319467 3.9424-76.305067-4.266667-13.909333-4.590933-24.6784-12.578133-29.7984-25.9584-7.901867-20.701867 0.887467-47.104 19.831467-60.3136 17.373867-12.117333 37.717333-15.9232 58.453333-15.9232 22.545067-0.017067 45.090133 2.423467 68.232533 3.84L307.2 432.298667c-15.069867-1.723733-29.4912-3.925333-43.997867-4.9152-41.0112-2.798933-80.64 2.6112-117.469866 20.462933-30.020267 14.557867-52.053333 36.010667-58.6752 68.130133-7.850667 38.144 11.537067 69.495467 51.7632 85.845334 19.1488 7.765333 39.287467 12.509867 60.0064 12.5952 24.746667 0.1024 49.493333-1.570133 74.205866-2.952534 3.106133-0.170667 8.311467-2.901333 8.669867-5.034666 1.979733-11.554133 2.730667-23.278933 3.9424-35.464534z" fill="#DD1700" p-id="2208"></path></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/LBJhui/LBJhui-blog" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://blog.csdn.net/qq_36081714" aria-label target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><svg t="1721011213162" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2207" width="200" height="200"><path d="M512 1024C229.2224 1024 0 794.7776 0 512 0 229.2224 229.2224 0 512 0c282.7776 0 512 229.2224 512 512 0 282.7776-229.2224 512-512 512z m17.066667-413.525333c34.850133 4.352 68.778667 5.12 102.741333 2.0992 23.04-2.048 44.817067-8.362667 64.170667-21.9136 38.212267-26.794667 49.783467-85.1968 24.251733-123.050667-14.626133-21.7088-36.8128-30.344533-60.757333-35.498667-35.054933-7.543467-70.4512-5.751467-105.847467-3.413333-5.666133 0.3584-6.7584 3.072-7.236267 8.209067-3.072 32.682667-6.536533 65.314133-9.813333 97.962666-2.5088 24.814933-4.932267 49.629867-7.509333 75.605334z m53.4016-33.928534c1.962667-20.906667 3.6352-39.338667 5.4272-57.770666 1.553067-15.906133 3.413333-31.778133 4.727466-47.701334 0.3584-4.283733 1.553067-6.656 5.956267-6.382933 15.616 1.041067 31.709867 0.034133 46.728533 3.652267 36.488533 8.823467 48.725333 54.306133 23.3472 83.029333-15.8208 17.902933-36.7616 23.586133-59.255466 25.088-8.465067 0.546133-17.015467 0.085333-26.9312 0.085333zM512 434.295467c-2.184533-0.648533-3.5328-1.1776-4.932267-1.4336-37.717333-6.877867-75.690667-8.328533-113.646933-2.816-20.974933 3.037867-41.0112 9.489067-57.480533 23.330133-22.9888 19.319467-21.640533 46.848 4.4032 62.0032 13.056 7.594667 28.023467 12.509867 42.5984 17.288533 14.08 4.608 28.996267 6.826667 43.144533 11.264 12.5952 3.925333 14.011733 14.318933 3.584 22.306134-3.345067 2.56-7.441067 5.085867-11.537067 5.751466-11.195733 1.826133-22.698667 4.386133-33.826133 3.566934-24.098133-1.774933-48.042667-5.461333-72.5504-8.430934-1.365333 10.615467-2.935467 23.0912-4.5568 35.9424 4.181333 1.365333 7.68 2.730667 11.264 3.618134 33.9456 8.4992 68.386133 9.608533 102.912 5.12 20.087467-2.6112 39.4752-7.901867 56.695467-19.029334 28.603733-18.4832 36.693333-57.1904-4.676267-75.383466-14.506667-6.382933-30.190933-10.410667-45.482667-15.086934-11.4176-3.4816-23.313067-5.614933-34.525866-9.5232-9.7792-3.413333-11.144533-12.202667-3.037867-18.397866 4.6592-3.549867 10.717867-6.997333 16.384-7.3728a480.853333 480.853333 0 0 1 53.384533-0.853334c15.377067 0.699733 30.651733 3.549867 46.4896 5.5296L512 434.295467z m257.143467 2.048L750.933333 614.2976h54.152534c4.778667-45.636267 9.710933-90.7264 14.062933-135.8848 0.6144-6.365867 2.3552-8.840533 8.686933-9.0112 11.434667-0.273067 22.8864-1.979733 34.286934-1.570133 23.722667 0.853333 42.3936 9.728 38.4 43.264-2.901333 24.2688-5.597867 48.571733-8.2432 72.874666-1.092267 10.069333-1.826133 20.189867-2.730667 30.4128h55.330133c3.584-35.259733 7.9872-70.058667 10.496-104.994133 3.413333-47.4624-17.7664-73.3184-64.682666-80.213333-40.96-6.007467-81.339733-0.341333-121.5488 7.133866z m-483.498667 134.6048c-8.738133 1.297067-16.384 2.798933-24.098133 3.4816-25.6512 2.235733-51.319467 3.9424-76.305067-4.266667-13.909333-4.590933-24.6784-12.578133-29.7984-25.9584-7.901867-20.701867 0.887467-47.104 19.831467-60.3136 17.373867-12.117333 37.717333-15.9232 58.453333-15.9232 22.545067-0.017067 45.090133 2.423467 68.232533 3.84L307.2 432.298667c-15.069867-1.723733-29.4912-3.925333-43.997867-4.9152-41.0112-2.798933-80.64 2.6112-117.469866 20.462933-30.020267 14.557867-52.053333 36.010667-58.6752 68.130133-7.850667 38.144 11.537067 69.495467 51.7632 85.845334 19.1488 7.765333 39.287467 12.509867 60.0064 12.5952 24.746667 0.1024 49.493333-1.570133 74.205866-2.952534 3.106133-0.170667 8.311467-2.901333 8.669867-5.034666 1.979733-11.554133 2.730667-23.278933 3.9424-35.464534z" fill="#DD1700" p-id="2208"></path></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-17a5e62e><button data-v-17a5e62e>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible collapsed has-active" data-v-c40bc020 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h2 class="text" data-v-b7550ba0>JavaScript高级程序设计(第4版)</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/High-Performance%20JavaScript/%E7%AC%AC1%E7%AB%A0%20%E4%BB%80%E4%B9%88%E6%98%AFJavaScript" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第1章 什么是JavaScript</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/High-Performance%20JavaScript/%E7%AC%AC2%E7%AB%A0%20HTML%E4%B8%AD%E7%9A%84JavaScript" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第2章 HTML中的JavaScript</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/High-Performance%20JavaScript/%E7%AC%AC3%E7%AB%A0%20%E8%AF%AD%E8%A8%80%E5%9F%BA%E7%A1%80" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第3章 语言基础</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/High-Performance%20JavaScript/%E7%AC%AC4%E7%AB%A0%20%E5%8F%98%E9%87%8F%E3%80%81%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%B8%8E%E5%86%85%E5%AD%98" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第4章 变量、作用域与内存</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/High-Performance%20JavaScript/%E7%AC%AC5%E7%AB%A0%20%E5%9F%BA%E6%9C%AC%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第5章 基本引用类型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/High-Performance%20JavaScript/%E7%AC%AC6%E7%AB%A0%20%E9%9B%86%E5%90%88%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第6章 集合引用类型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/High-Performance%20JavaScript/%E7%AC%AC7%E7%AB%A0%20%E8%BF%AD%E4%BB%A3%E5%99%A8%E4%B8%8E%E7%94%9F%E6%88%90%E5%99%A8" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第7章 迭代器与生成器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/High-Performance%20JavaScript/%E7%AC%AC8%E7%AB%A0%20%E5%AF%B9%E8%B1%A1%E3%80%81%E7%B1%BB%E4%B8%8E%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第8章 对象、类与面向对象编程</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/High-Performance%20JavaScript/%E7%AC%AC9%E7%AB%A0%20%E4%BB%A3%E7%90%86%E4%B8%8E%E5%8F%8D%E5%B0%84" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第9章 代理与反射</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/High-Performance%20JavaScript/%E7%AC%AC10%E7%AB%A0%20%E5%87%BD%E6%95%B0" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第10章 函数</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/High-Performance%20JavaScript/%E7%AC%AC11%E7%AB%A0%20%E6%9C%9F%E7%BA%A6(promise)%E4%B8%8E%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第11章 期约(promise)与异步函数</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/High-Performance%20JavaScript/%E7%AC%AC12%E7%AB%A0%20BOM" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第12章 BOM</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/High-Performance%20JavaScript/%E7%AC%AC13%E7%AB%A0%20%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%A3%80%E6%B5%8B" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第13章 客户端检测</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/High-Performance%20JavaScript/%E7%AC%AC14%E7%AB%A0%20DOM" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第14章 DOM</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/High-Performance%20JavaScript/%E7%AC%AC15%E7%AB%A0%20DOM%E6%89%A9%E5%B1%95" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第15章 DOM扩展</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/High-Performance%20JavaScript/%E7%AC%AC16%E7%AB%A0%20DOM2%E5%92%8CDOM3" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第16章 DOM2和DOM3</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/High-Performance%20JavaScript/%E7%AC%AC17%E7%AB%A0%20%E4%BA%8B%E4%BB%B6" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第17章 事件</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/High-Performance%20JavaScript/%E7%AC%AC18%E7%AB%A0%20%E5%8A%A8%E7%94%BB%E4%B8%8ECanvas%E5%9B%BE%E5%BD%A2" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第18章 动画与Canvas图形</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/High-Performance%20JavaScript/%E7%AC%AC19%E7%AB%A0%20%E8%A1%A8%E5%8D%95%E8%84%9A%E6%9C%AC" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第19章 表单脚本</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/High-Performance%20JavaScript/%E7%AC%AC20%E7%AB%A0%20JavaScriptAPI" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第20章 JavaScriptAPI</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/High-Performance%20JavaScript/%E7%AC%AC21%E7%AB%A0%20%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%E4%B8%8E%E8%B0%83%E8%AF%95" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第21章 错误处理与调试</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/High-Performance%20JavaScript/%E7%AC%AC22%E7%AB%A0%20%E5%A4%84%E7%90%86XML" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第22章 处理XML</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/High-Performance%20JavaScript/%E7%AC%AC23%E7%AB%A0%20JSON" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第23章 JSON</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/High-Performance%20JavaScript/%E7%AC%AC24%E7%AB%A0%20%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E4%B8%8E%E8%BF%9C%E7%A8%8B%E8%B5%84%E6%BA%90" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>第24章 网络请求与远程资源</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h2 class="text" data-v-b7550ba0>JavaScript</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b7550ba0><span class="vpi-chevron-right caret-icon" data-v-b7550ba0></span></div></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/1.%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E(var,let%E5%92%8Cconst)" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>1.变量声明(var,let和const)</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/2.%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84undefined" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>2.你不知道的undefined</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/3.%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E4%B8%8E%E6%99%AE%E9%80%9A%E5%87%BD%E6%95%B0%E7%9A%84%E5%8C%BA%E5%88%AB" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>3.箭头函数与普通函数的区别</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/4.console%E5%91%BD%E4%BB%A4%E4%BB%A5%E5%8F%8A%E7%94%A8%E6%B3%95" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>4.console命令以及用法</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/LBJhui-blog/website/language/JavaScript/5.%E5%8A%A8%E6%80%81%E6%89%A7%E8%A1%8CJS" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>5.动态执行JS</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _LBJhui-blog_website_language_JavaScript_High-Performance%20JavaScript_%E7%AC%AC10%E7%AB%A0%20%E5%87%BD%E6%95%B0 external-link-icon-enabled" data-v-39a288b8><div><h1 id="第-10-章-函数" tabindex="-1">第 10 章 函数 <a class="header-anchor" href="#第-10-章-函数" aria-label="Permalink to &quot;第 10 章 函数&quot;">​</a></h1><h2 id="_10-1-箭头函数" tabindex="-1">10.1 箭头函数 <a class="header-anchor" href="#_10-1-箭头函数" aria-label="Permalink to &quot;10.1 箭头函数&quot;">​</a></h2><p>箭头函数不能使用 <code>arguments</code>、<code>super</code> 和 <code>new.target</code>，也不能用作构造函数。此外，箭头函数也没有 <code>prototype</code> 属性。</p><p><a href="./../3.箭头函数与普通函数的区别">箭头函数和普通函数的区别</a><!----></p><h2 id="_10-2-函数名" tabindex="-1">10.2 函数名 <a class="header-anchor" href="#_10-2-函数名" aria-label="Permalink to &quot;10.2 函数名&quot;">​</a></h2><p>ECMAScript 6 的所有函数对象都会暴露一个只读的 <code>name</code> 属性，其中包含关于函数的信息。多数情况下，这个属性中保存的就是一个函数标识符，或者说是一个字符串化的变量名。即使函数没有名称，也会如实显示成空字符串。如果它是使用 <code>Function</code> 构造函数创建的，则会标识成&quot;anonymous&quot;：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bar</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> baz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(foo.name) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;foo&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(bar.name) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;bar&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(baz.name) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;baz&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}).name) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;&#39;（空字符串）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().name) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;anonymous&#39;</span></span></code></pre></div><p>如果函数是一个获取函数、设置函数，或者使用 <code>bind()</code>实例化，那么标识符前面会加上一个前缀：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(foo.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).name) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;bound foo&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dog </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  years: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  get</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> age</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.years</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  set</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> age</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">newAge</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.years </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> newAge</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> propertyDescriptor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getOwnPropertyDescriptor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dog, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;age&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(propertyDescriptor.get.name) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;get age&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(propertyDescriptor.set.name) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;set age&#39;</span></span></code></pre></div><h2 id="_10-3-理解参数" tabindex="-1">10.3 理解参数 <a class="header-anchor" href="#_10-3-理解参数" aria-label="Permalink to &quot;10.3 理解参数&quot;">​</a></h2><p>ECMAScript 函数既不关心传入的参数个数，也不关心这些参数的数据类型。定义函数时要接收两个参数，并不意味着调用时就传两个参数。你可以传一个、三个，甚至一个也不传，解释器都不会报错。</p><p>之所以会这样，主要是因为 ECMAScript 函数的参数在内部表现为一个数组。函数被调用时总会接收一个数组，但函数并不关心这个数组中包含什么。如果数组中什么也没有，那没问题；如果数组的元素超出了要求，那也没问题。事实上，在使用 <code>function</code> 关键字定义（非箭头）函数时，可以在函数内部访问 <code>arguments</code> 对象，从中取得传进来的每个参数值。</p><p><code>arguments</code> 对象是一个类数组对象（但不是 <code>Array</code> 的实例）​，因此可以使用中括号语法访问其中的元素 ​。而要确定传进来多少个参数，可以访问 <code>arguments.length</code> 属性。</p><p><code>arguments</code> 对象可以跟命名参数一起使用，它的值始终会与对应的命名参数同步。另外还要记住一点：如果只传了一个参数，然后把 <code>arguments[1]</code>设置为某个值，那么这个值并不会反映到第二个命名参数。这是因为 <code>arguments</code> 对象的长度是根据传入的参数个数，而非定义函数时给出的命名参数个数确定的。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> doAdd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">num1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">num2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  arguments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">arguments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> num2)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doAdd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 11</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doAdd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// NaN</span></span></code></pre></div><p>严格模式下，<code>arguments</code> 会有一些变化。首先，像前面那样给 <code>arguments[1]</code>赋值不会再影响 <code>num2</code> 的值。就算把 <code>arguments[1]</code>设置为 10, <code>num2</code> 的值仍然还是传入的值。其次，在函数中尝试重写 <code>arguments</code> 对象会导致语法错误。​（代码也不会执行。​）</p><h3 id="箭头函数中的参数" tabindex="-1">箭头函数中的参数 <a class="header-anchor" href="#箭头函数中的参数" aria-label="Permalink to &quot;箭头函数中的参数&quot;">​</a></h3><p>如果函数是使用箭头语法定义的，那么传给函数的参数将不能使用 <code>arguments</code> 关键字访问，而只能通过定义的命名参数访问。</p><div class="tip custom-block"><p class="custom-block-title">注意</p><p>ECMAScript 中的所有参数都按值传递的。不可能按引用传递参数。如果把对象作为参数传递，那么传递的值就是这个对象的引用。</p></div><h2 id="_10-4-没有重载" tabindex="-1">10.4 没有重载 <a class="header-anchor" href="#_10-4-没有重载" aria-label="Permalink to &quot;10.4 没有重载&quot;">​</a></h2><p>ECMAScript 函数不能像传统编程那样重载。在其他语言比如 Java 中，一个函数可以有两个定义，只要签名（接收参数的类型和数量）不同就行。如前所述，ECMAScript 函数没有签名，因为参数是由包含零个或多个值的数组表示的。没有函数签名，自然也就没有重载。</p><h2 id="_10-5-默认参数值" tabindex="-1">10.5 默认参数值 <a class="header-anchor" href="#_10-5-默认参数值" aria-label="Permalink to &quot;10.5 默认参数值&quot;">​</a></h2><p>在使用默认参数时，<code>arguments</code> 对象的值不反映参数的默认值，只反映传给函数的参数。当然，跟 ES5 严格模式一样，修改命名参数也不会影响 <code>arguments</code> 对象，它始终以调用函数时传入的值为准：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> makeKing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Henry&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Louis&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `King ${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">arguments</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">makeKing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;King undefined&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">makeKing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Louis&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;King Louis&#39;</span></span></code></pre></div><p>默认参数值并不限于原始值或对象类型，也可以使用调用函数返回的值。函数的默认参数只有在函数被调用时才会求值，不会在函数定义时求值。而且，计算默认值的函数只有在调用函数但未传相应参数时才会被调用。</p><h3 id="默认参数作用域与暂时性死区" tabindex="-1">默认参数作用域与暂时性死区 <a class="header-anchor" href="#默认参数作用域与暂时性死区" aria-label="Permalink to &quot;默认参数作用域与暂时性死区&quot;">​</a></h3><p>给多个参数定义默认值实际上跟使用 let 关键字顺序声明变量一样。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> makeKing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Henry&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">numerals</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;VIII&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `King ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">numerals</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">makeKing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;King Henry VIII&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 这里的默认参数会按照定义它们的顺序依次被初始化。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> makeKing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Henry&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> numerals </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;VIII&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `King ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">numerals</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>因为参数是按顺序初始化的，所以后定义默认值的参数可以引用先定义的参数。参数初始化顺序遵循“暂时性死区”规则，即前面定义的参数不能引用后面定义的。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> makeKing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Henry&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">numerals</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `King ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">numerals</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">makeKing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;King Henry Henry&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> makeKing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> numerals, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">numerals</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;VIII&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `King ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">numerals</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">makeKing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Cannot access &#39;numerals&#39; before initialization</span></span></code></pre></div><p>参数也存在于自己的作用域中，它们不能引用函数体的作用域：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 调用时不传第二个参数会报错</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> makeKing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Henry&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">numerals</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> defaultNumeral) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> defaultNumeral </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;VIII&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> `King ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">numerals</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">makeKing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// defaultNumeral is not defined</span></span></code></pre></div><h2 id="_10-6-参数扩展与收集" tabindex="-1">10.6 参数扩展与收集 <a class="header-anchor" href="#_10-6-参数扩展与收集" aria-label="Permalink to &quot;10.6 参数扩展与收集&quot;">​</a></h2><p>扩展运算符</p><h3 id="_10-6-1-扩展参数" tabindex="-1">10.6.1 扩展参数 <a class="header-anchor" href="#_10-6-1-扩展参数" aria-label="Permalink to &quot;10.6.1 扩展参数&quot;">​</a></h3><h3 id="_10-6-2-收集参数" tabindex="-1">10.6.2 收集参数 <a class="header-anchor" href="#_10-6-2-收集参数" aria-label="Permalink to &quot;10.6.2 收集参数&quot;">​</a></h3><h2 id="_10-7-函数声明与函数表达式" tabindex="-1">10.7 函数声明与函数表达式 <a class="header-anchor" href="#_10-7-函数声明与函数表达式" aria-label="Permalink to &quot;10.7 函数声明与函数表达式&quot;">​</a></h2><p>JavaScript 引擎在任何代码执行之前，会先读取函数声明（函数声明提升（function declaration hoisting）​），并在执行上下文中生成函数定义。而函数表达式必须等到代码执行到它那一行，才会在执行上下文中生成函数定义。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 没问题</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sum1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 20</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sum1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">num1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">num2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> num1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> num2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 会出错</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sum2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Cannot access &#39;sum2&#39; before initialization</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sum2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">num1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">num2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> num1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> num2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">注意</p><p>在使用函数表达式初始化变量时，也可以给函数一个名称，比如 <code>let sum =function sum() {}</code>。</p></div><h2 id="_10-8-函数作为值" tabindex="-1">10.8 函数作为值 <a class="header-anchor" href="#_10-8-函数作为值" aria-label="Permalink to &quot;10.8 函数作为值&quot;">​</a></h2><h2 id="_10-9-函数内部" tabindex="-1">10.9 函数内部 <a class="header-anchor" href="#_10-9-函数内部" aria-label="Permalink to &quot;10.9 函数内部&quot;">​</a></h2><p>在 ECMAScript 5 中，函数内部存在两个特殊的对象：<code>arguments</code> 和 <code>this</code>。ECMAScript 6 又新增了 <code>new.target</code> 属性。</p><h3 id="_10-9-1-arguments" tabindex="-1">10.9.1 arguments <a class="header-anchor" href="#_10-9-1-arguments" aria-label="Permalink to &quot;10.9.1 arguments&quot;">​</a></h3><p><code>arguments</code> 对象前面讨论过多次了，它是一个类数组对象，包含调用函数时传入的所有参数。这个对象只有以 <code>function</code> 关键字定义函数（相对于使用箭头语法创建函数）时才会有。虽然主要用于包含函数参数，但 <code>arguments</code> 对象其实还有一个 <code>callee</code> 属性，是一个指向 <code>arguments</code> 对象所在函数的指针。使用 <code>arguments.callee</code> 就可以让函数逻辑与函数名解耦：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> factorial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">num</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (num </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> num </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> factorial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(num </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> factorial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">num</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (num </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> num </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> arguments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">callee</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(num </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_10-9-2-this" tabindex="-1">10.9.2 this <a class="header-anchor" href="#_10-9-2-this" aria-label="Permalink to &quot;10.9.2 this&quot;">​</a></h3><p>在标准函数中，<code>this</code> 引用的是把函数当成方法调用的上下文对象，这时候通常称其为 <code>this</code> 值（在网页的全局上下文中调用函数时，<code>this</code> 指向 <code>windows</code>）​。</p><p>在箭头函数中，<code>this</code> 引用的是定义箭头函数的上下文。</p><p>在事件回调或定时回调中调用某个函数时，<code>this</code> 值指向的并非想要的对象。此时将回调函数写成箭头函数就可以解决问题。这是因为箭头函数中的 <code>this</code> 会保留定义该函数时的上下文。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> royaltyName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;LBJhui&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> King</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.royaltyName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Henry&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // this引用King的实例</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.royaltyName), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Queen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.royaltyName </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Elizabeth&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // this引用window对象</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.royaltyName)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> King</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Henry</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Queen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// undefined</span></span></code></pre></div><h3 id="_10-9-3-caller" tabindex="-1">10.9.3 caller <a class="header-anchor" href="#_10-9-3-caller" aria-label="Permalink to &quot;10.9.3 caller&quot;">​</a></h3><p>ECMAScript 5 也会给函数对象上添加一个属性：<code>caller</code>。虽然 ECMAScript 3 中并没有定义，但所有浏览器除了早期版本的 Opera 都支持这个属性。这个属性引用的是调用当前函数的函数，或者如果是在全局作用域中调用的则为 <code>null</code>。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> outer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  inner</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> inner</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(inner.caller) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ƒ outer() { inner() }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">arguments</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.callee.caller) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 降低耦合度</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">outer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><p>在严格模式下访问 <code>arguments.callee</code> 会报错。ECMAScript 5 也定义了 <code>arguments.caller</code>，但在严格模式下访问它会报错，在非严格模式下则始终是 <code>undefined</code>。这是为了分清 <code>arguments.caller</code> 和函数的 <code>caller</code> 而故意为之的。而作为对这门语言的安全防护，这些改动也让第三方代码无法检测同一上下文中运行的其他代码。</p><p>严格模式下还有一个限制，就是不能给函数的 <code>caller</code> 属性赋值，否则会导致错误。</p><h3 id="_10-9-4-new-target" tabindex="-1">10.9.4 new.target <a class="header-anchor" href="#_10-9-4-new-target" aria-label="Permalink to &quot;10.9.4 new.target&quot;">​</a></h3><p>ECMAScript 中的函数始终可以作为构造函数实例化一个新对象，也可以作为普通函数被调用。ECMAScript 6 新增了检测函数是否使用 <code>new</code> 关键字调用的 <code>new.target</code> 属性。如果函数是正常调用的，则 <code>new.target</code> 的值是 <code>undefined</code>；如果是使用 <code>new</code> 关键字调用的，则 <code>new.target</code> 将引用被调用的构造函数。</p><h2 id="_10-10-函数属性与方法" tabindex="-1">10.10 函数属性与方法 <a class="header-anchor" href="#_10-10-函数属性与方法" aria-label="Permalink to &quot;10.10 函数属性与方法&quot;">​</a></h2><p>ECMAScript 中的函数是对象，因此有属性和方法。每个函数都有两个属性：<code>length</code> 和 <code>prototype</code>。其中，<code>length</code> 属性保存函数定义的命名参数的个数。</p><p><code>prototype</code> 属性也许是 ECMAScript 核心中最有趣的部分。<code>prototype</code> 是保存引用类型所有实例方法的地方，这意味着 <code>toString()</code>、<code>valueOf()</code>等方法实际上都保存在 <code>prototype</code> 上，进而由所有实例共享。这个属性在自定义类型时特别重要。​（相关内容已经在第 8 章详细介绍过了。​）在 ECMAScript 5 中，<code>prototype</code> 属性是不可枚举的，因此使用 <code>for-in</code> 循环不会返回这个属性。</p><p>函数还有两个方法：<code>apply()</code>和 <code>call()</code>。这两个方法都会以指定的 <code>this</code> 值来调用函数，即会设置调用函数时函数体内 <code>this</code> 对象的值。<code>apply()</code>方法接收两个参数：函数内 <code>this</code> 的值和一个参数数组。第二个参数可以是 <code>Array</code> 的实例，但也可以是 <code>arguments</code> 对象。</p><div class="tip custom-block"><p class="custom-block-title">注意</p><p>在严格模式下，调用函数时如果没有指定上下文对象，则 <code>this</code> 值不会指向 <code>window</code>。除非使用 <code>apply()</code>或 <code>call()</code>把函数指定给一个对象，否则 <code>this</code> 的值会变成 <code>undefined</code>。</p></div><p><code>call()</code>方法与 <code>apply()</code>的作用一样，只是传参的形式不同。第一个参数跟 <code>apply()</code>一样，也是 <code>this</code> 值，而剩下的要传给被调用函数的参数则是逐个传递的。</p><p><code>bind()</code>方法会创建一个新的函数实例，其 <code>this</code> 值会被绑定到传给 <code>bind()</code>的对象。</p><p>对函数而言，继承的方法 <code>toLocaleString()</code>和 <code>toString()</code>始终返回函数的代码。返回代码的具体格式因浏览器而异。有的返回源代码，包含注释，而有的只返回代码的内部形式，会删除注释，甚至代码可能被解释器修改过。由于这些差异，因此不能在重要功能中依赖这些方法返回的值，而只应在调试中使用它们。继承的方法 <code>valueOf()</code>返回函数本身。</p><h2 id="_10-11-函数表达式" tabindex="-1">10.11 函数表达式 <a class="header-anchor" href="#_10-11-函数表达式" aria-label="Permalink to &quot;10.11 函数表达式&quot;">​</a></h2><p>定义函数有两种方式：函数声明和函数表达式。</p><p>函数声明的关键特点是函数声明提升，即函数声明会在代码执行之前获得定义。这意味着函数声明可以出现在调用它的代码之后。</p><p>第二种创建函数的方式就是函数表达式。函数表达式有几种不同的形式，最常见的是这样的：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> functionName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">arg0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">arg1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">arg2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 函数体</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>这样创建的函数叫作匿名函数（anonymous funtion）​，因为 <code>function</code> 关键字后面没有标识符。​（匿名函数有也时候也被称为兰姆达函数）​。未赋值给其他变量的匿名函数的 <code>name</code> 属性是空字符串。</p><p>函数表达式跟 JavaScript 中的其他表达式一样，需要先赋值再使用。</p><h2 id="_10-12-递归" tabindex="-1">10.12 递归 <a class="header-anchor" href="#_10-12-递归" aria-label="Permalink to &quot;10.12 递归&quot;">​</a></h2><p>递归函数通常的形式是一个函数通过名称调用自己。</p><h2 id="_10-13-尾调用优化" tabindex="-1">10.13 尾调用优化 <a class="header-anchor" href="#_10-13-尾调用优化" aria-label="Permalink to &quot;10.13 尾调用优化&quot;">​</a></h2><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> outerFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> innerFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 尾调用</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>在 ES6 优化之前，执行这个例子会在内存中发生如下操作。</p><p>（1）执行到 <code>outerFunction</code> 函数体，第一个栈帧被推到栈上。<br> （2）执行 <code>outerFunction</code> 函数体，到 <code>return</code> 语句。计算返回值必须先计算 <code>innerFunction</code>。<br> （3）执行到 <code>innerFunction</code> 函数体，第二个栈帧被推到栈上。<br> （4）执行 <code>innerFunction</code> 函数体，计算其返回值。<br> （5）将返回值传回 <code>outerFunction</code>，然后 <code>outerFunction</code> 再返回值。<br> （6）将栈帧弹出栈外。</p><p>在 ES6 优化之后，执行这个例子会在内存中发生如下操作。</p><p>（1）执行到 <code>outerFunction</code> 函数体，第一个栈帧被推到栈上。<br> （2）执行 <code>outerFunction</code> 函数体，到达 <code>return</code> 语句。为求值返回语句，必须先求值 <code>innerFunction</code>。<br> （3）引擎发现把第一个栈帧弹出栈外也没问题，因为 <code>innerFunction</code> 的返回值也是 <code>outerFunction</code> 的返回值。<br> （4）弹出 <code>outerFunction</code> 的栈帧。<br> （5）执行到 <code>innerFunction</code> 函数体，栈帧被推到栈上。<br> （6）执行 <code>innerFunction</code> 函数体，计算其返回值。<br> （7）将 <code>innerFunction</code> 的栈帧弹出栈外。</p><p>很明显，第一种情况下每多调用一次嵌套函数，就会多增加一个栈帧。而第二种情况下无论调用多少次嵌套函数，都只有一个栈帧。这就是 ES6 尾调用优化的关键：如果函数的逻辑允许基于尾调用将其销毁，则引擎就会那么做。</p><h3 id="_10-13-1-尾调用优化的条件" tabindex="-1">10.13.1 尾调用优化的条件 <a class="header-anchor" href="#_10-13-1-尾调用优化的条件" aria-label="Permalink to &quot;10.13.1 尾调用优化的条件&quot;">​</a></h3><p>尾调用优化的条件就是确定外部栈帧真的没有必要存在了。涉及的条件如下：</p><p>❑ 代码在严格模式下执行；<br> ❑ 外部函数的返回值是对尾调用函数的调用；<br> ❑ 尾调用函数返回后不需要执行额外的逻辑；<br> ❑ 尾调用函数不是引用外部函数作用域中自由变量的闭包。</p><p>下面展示了几个违反上述条件的函数，因此都不符号尾调用优化的要求：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;use strict&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 无优化：尾调用没有返回</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> outerFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  innerFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 无优化：尾调用没有直接返回</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> outerFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> innerFunctionResult </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> innerFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> innerFunctionResult</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 无优化：尾调用返回后必须转型为字符串</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> outerFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> innerFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 无优化：尾调用是一个闭包</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> outerFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> foo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;bar&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> innerFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> foo</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> innerFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>下面是几个符合尾调用优化条件的例子：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;use strict&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 有优化：栈帧销毁前执行参数计算</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> outerFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> innerFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 有优化：初始返回值不涉及栈帧</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> outerFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> innerFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 有优化：两个内部函数都在尾部</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> outerFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">condition</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> condition </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> innerFunctionA</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> innerFunctionB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">注意</p><p>之所以要求严格模式，主要因为在非严格模式下函数调用中允许使用 <code>f.arguments</code> 和 <code>f.caller</code>，而它们都会引用外部函数的栈帧。显然，这意味着不能应用优化了。因此尾调用优化要求必须在严格模式下有效，以防止引用这些属性。</p></div><h3 id="_10-13-2-尾调用优化的代码" tabindex="-1">10.13.2 尾调用优化的代码 <a class="header-anchor" href="#_10-13-2-尾调用优化的代码" aria-label="Permalink to &quot;10.13.2 尾调用优化的代码&quot;">​</a></h3><p>可以通过把简单的递归函数转换为待优化的代码来加深对尾调用优化的理解。下面是一个通过递归计算斐波纳契数列的函数：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fib</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">n</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> n</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fib</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fib</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>显然这个函数不符合尾调用优化的条件，因为返回语句中有一个相加的操作。结果，<code>fib(n)</code>的栈帧数的内存复杂度是 O(2<sup>n</sup>)​。因此，即使这么一个简单的调用也可以给浏览器带来麻烦。</p><p>当然，解决这个问题也有不同的策略，比如把递归改写成迭代循环形式。不过，也可以保持递归实现，但将其重构为满足优化条件的形式。为此可以使用两个嵌套的函数，外部函数作为基础框架，内部函数执行递归：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;use strict&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 基础框架</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fib</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">n</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fibImpl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, n)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 执行递归</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fibImpl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">n</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> fibImpl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(b, a </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> b, n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>这样重构之后，就可以满足尾调用优化的所有条件，再调用 <code>fib(1000)</code>就不会对浏览器造成威胁了。</p><h2 id="_10-14-闭包" tabindex="-1">10.14 闭包 <a class="header-anchor" href="#_10-14-闭包" aria-label="Permalink to &quot;10.14 闭包&quot;">​</a></h2><p>闭包指的是那些引用了另一个函数作用域中变量的函数，通常是在嵌套函数中实现的。</p><div class="tip custom-block"><p class="custom-block-title">注意</p><p>因为闭包会保留它们包含函数的作用域，所以比其他函数更占用内存。过度使用闭包可能导致内存过度占用，因此建议仅在十分必要时使用。V8 等优化的 JavaScript 引擎会努力回收被闭包困住的内存，不过我们还是建议在使用闭包时要谨慎。</p></div><h3 id="_10-14-1-this-对象" tabindex="-1">10.14.1 this 对象 <a class="header-anchor" href="#_10-14-1-this-对象" aria-label="Permalink to &quot;10.14.1 this 对象&quot;">​</a></h3><p>在闭包中使用 <code>this</code> 会让代码变复杂。如果内部函数没有使用箭头函数定义，则 <code>this</code> 对象会在运行时绑定到执行函数的上下文。如果在全局函数中调用，则 <code>this</code> 在非严格模式下等于 <code>window</code>，在严格模式下等于 <code>undefined</code>。如果作为某个对象的方法调用，则 <code>this</code> 等于这个对象。匿名函数在这种情况下不会绑定到某个对象，这就意味着 <code>this</code> 会指向 <code>window</code>，除非在严格模式下 <code>this</code> 是 <code>undefined</code>。不过，由于闭包的写法所致，这个事实有时候没有那么容易看出来。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window.identity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;The Window&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> object </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  identity: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;My Object&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  getIdentityFunc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.identity</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getIdentityFunc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()()) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;The Window&#39;</span></span></code></pre></div><h3 id="_10-14-2-内存泄漏" tabindex="-1">10.14.2 内存泄漏 <a class="header-anchor" href="#_10-14-2-内存泄漏" aria-label="Permalink to &quot;10.14.2 内存泄漏&quot;">​</a></h3><h2 id="_10-15-立即调用的函数表达式" tabindex="-1">10.15 立即调用的函数表达式 <a class="header-anchor" href="#_10-15-立即调用的函数表达式" aria-label="Permalink to &quot;10.15 立即调用的函数表达式&quot;">​</a></h2><p>立即调用的匿名函数又被称作立即调用的函数表达式（IIFE, Immediately Invoked Function Expression）​。</p><h2 id="_10-16-私有变量" tabindex="-1">10.16 私有变量 <a class="header-anchor" href="#_10-16-私有变量" aria-label="Permalink to &quot;10.16 私有变量&quot;">​</a></h2><p>特权方法（privileged method）是能够访问函数私有变量（及私有函数）的公有方法。</p><p>在对象上有两种方式创建特权方法。第一种是在构造函数中实现，比如：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 私有变量和私有函数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> privateVariable </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> privateFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 特权方法</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">publicMethod</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    privateVariable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> privateFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>这个模式是把所有私有变量和私有函数都定义在构造函数中。然后，再创建一个能够访问这些私有成员的特权方法。这样做之所以可行，是因为定义在构造函数中的特权方法其实是一个闭包，它具有访问构造函数中定义的所有变量和函数的能力。</p><p>如下面的例子所示，可以定义私有变量和特权方法，以隐藏不能被直接修改的数据：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> person </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Nicholas&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(person.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;Nicholas&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">person.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Greg&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(person.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;Greg&#39;</span></span></code></pre></div><p>这段代码中的构造函数定义了两个特权方法：<code>getName()</code>和 <code>setName()</code>。每个方法都可以构造函数外部调用，并通过它们来读写私有的 <code>name</code> 变量。在 <code>Person</code> 构造函数外部，没有别的办法访问 <code>name</code>。因为两个方法都定义在构造函数内部，所以它们都是能够通过作用域链访问 <code>name</code> 的闭包。私有变量 <code>name</code> 对每个 <code>Person</code> 实例而言都是独一无二的，因为每次调用构造函数都会重新创建一套变量和方法。不过这样也有个问题：必须通过构造函数来实现这种隔离。正如第 8 章所讨论的，构造函数模式的缺点是每个实例都会重新创建一遍新方法。使用静态私有变量实现特权方法可以避免这个问题。</p><h3 id="_10-16-1-静态私有变量" tabindex="-1">10.16.1 静态私有变量 <a class="header-anchor" href="#_10-16-1-静态私有变量" aria-label="Permalink to &quot;10.16.1 静态私有变量&quot;">​</a></h3><p>特权方法也可以通过使用私有作用域定义私有变量和函数来实现。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 私有变量和私有函数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> privateVariable </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> privateFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 构造函数</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  MyObject</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 公有和特权方法</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  MyObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">publicMethod</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    privateVariable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> privateFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})()</span></span></code></pre></div><p>在这个模式中，匿名函数表达式创建了一个包含构造函数及其方法的私有作用域。首先定义的是私有变量和私有函数，然后又定义了构造函数和公有方法。公有方法定义在构造函数的原型上，与典型的原型模式一样。注意，这个模式定义的构造函数没有使用函数声明，使用的是函数表达式。函数声明会创建内部函数，在这里并不是必需的。基于同样的原因（但操作相反）​，这里声明 <code>MyObject</code> 并没有使用任何关键字。因为不使用关键字声明的变量会创建在全局作用域中，所以 <code>MyObject</code> 变成了全局变量，可以在这个私有作用域外部被访问。注意在严格模式下给未声明的变量赋值会导致错误。</p><p>这个模式与前一个模式的主要区别就是，私有变量和私有函数是由实例共享的。因为特权方法定义在原型上，所以同样是由实例共享的。特权方法作为一个闭包，始终引用着包含它的作用域。来看下面的例子：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  Person</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> value</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> person1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Nicholas&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(person1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;Nicholas&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">person1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Matt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(person1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;Matt&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> person2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Person</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Michael&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(person1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;Michael&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(person2.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// &#39;Michael&#39;</span></span></code></pre></div><p>这里的 <code>Person</code> 构造函数可以访问私有变量 <code>name</code>，跟 <code>getName()</code>和 <code>setName()</code>方法一样。使用这种模式，<code>name</code> 变成了静态变量，可供所有实例使用。这意味着在任何实例上调用 <code>setName()</code>修改这个变量都会影响其他实例。调用 <code>setName()</code>或创建新的 <code>Person</code> 实例都要把 <code>name</code> 变量设置为一个新值。而所有实例都会返回相同的值。</p><p>像这样创建静态私有变量可以利用原型更好地重用代码，只是每个实例没有了自己的私有变量。最终，到底是把私有变量放在实例中，还是作为静态私有变量，都需要根据自己的需求来确定。</p><div class="tip custom-block"><p class="custom-block-title">注意</p><p>使用闭包和私有变量会导致作用域链变长，作用域链越长，则查找变量所需的时间也越多。</p></div><h3 id="_10-16-2-模块模式" tabindex="-1">10.16.2 模块模式 <a class="header-anchor" href="#_10-16-2-模块模式" aria-label="Permalink to &quot;10.16.2 模块模式&quot;">​</a></h3><p>单例对象（singleton）就是只有一个实例的对象。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> singleton </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  name: value,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  method</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 方法的代码</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>模块模式是在单例对象基础上加以扩展，使其通过作用域链来关联私有变量和特权方法。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> singleton </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 私有变量和私有函数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> privateVariable </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> privateFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 特权/公有方法和属性</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    publicProperty: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    publicMethod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      privateVariable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> privateFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})()</span></span></code></pre></div><p>模块模式使用了匿名函数返回一个对象。在匿名函数内部，首先定义私有变量和私有函数。之后，创建一个要通过匿名函数返回的对象字面量。这个对象字面量中只包含可以公开访问的属性和方法。因为这个对象定义在匿名函数内部，所以它的所有公有方法都可以访问同一个作用域的私有变量和私有函数。本质上，对象字面量定义了单例对象的公共接口。如果单例对象需要进行某种初始化，并且需要访问私有变量时，那就可以采用这个模式：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> application </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 私有变量和私有函数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> components </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 初始化</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  components.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BaseComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 公共接口</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    getComponentCount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> components.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    registerComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> component </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;object&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        components.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(component)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})()</span></span></code></pre></div><p>在 Web 开发中，经常需要使用单例对象管理应用程序级的信息。上面这个简单的例子创建了一个 <code>application</code> 对象用于管理组件。在创建这个对象之后，内部就会创建一个私有的数组 <code>components</code>，然后将一个 <code>BaseComponent</code> 组件的新实例添加到数组中。​（<code>BaseComponent</code> 组件的代码并不重要，在这里用它只是为了说明模块模式的用法。​）对象字面量中定义的 <code>getComponentCount()</code>和 <code>register-Component()</code>方法都是可以访问 <code>components</code> 私有数组的特权方法。前一个方法返回注册组件的数量，后一个方法负责注册新组件。</p><p>在模块模式中，单例对象作为一个模块，经过初始化可以包含某些私有的数据，而这些数据又可以通过其暴露的公共方法来访问。以这种方式创建的每个单例对象都是 <code>Object</code> 的实例，因为最终单例都由一个对象字面量来表示。不过这无关紧要，因为单例对象通常是可以全局访问的，而不是作为参数传给函数的，所以可以避免使用 <code>instanceof</code> 操作符确定参数是不是对象类型的需求。</p><h3 id="_10-16-3-模块增强模式" tabindex="-1">10.16.3 模块增强模式 <a class="header-anchor" href="#_10-16-3-模块增强模式" aria-label="Permalink to &quot;10.16.3 模块增强模式&quot;">​</a></h3><p>另一个利用模块模式的做法是在返回对象之前先对其进行增强。这适合单例对象需要是某个特定类型的实例，但又必须给它添加额外属性或方法的场景。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> singleton </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 私有变量和私有函数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> privateVariable </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> privateFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 创建对象</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> object </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CustomType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 添加特权/公有属性和方法</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  object.publicProperty </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">publicMethod</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    privateVariable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> privateFunction</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 返回对象</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> object</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})()</span></span></code></pre></div><p>如果前一节的 <code>application</code> 对象必须是 <code>BaseComponent</code> 的实例，那么就可以使用下面的代码来创建它：</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> application </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 私有变量和私有函数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> components </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 初始化</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  components.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BaseComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 创建局部变量保存实例</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BaseComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 公共接口</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getComponentCount</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> components.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">registerComponent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">typeof</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> component </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;object&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      components.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(component)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 返回实例</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> app</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})()</span></span></code></pre></div><p>在这个重写的 <code>application</code> 单例对象的例子中，首先定义了私有变量和私有函数，跟之前例子中一样。主要区别在于这里创建了一个名为 <code>app</code> 的变量，其中保存了 <code>BaseComponent</code> 组件的实例。这是最终要变成 <code>application</code> 的那个对象的局部版本。在给这个局部变量 <code>app</code> 添加了能够访问私有变量的公共方法之后，匿名函数返回了这个对象。然后，这个对象被赋值给 <code>application</code>。</p><h2 id="_10-17-小结" tabindex="-1">10.17 小结 <a class="header-anchor" href="#_10-17-小结" aria-label="Permalink to &quot;10.17 小结&quot;">​</a></h2><p>❑ 函数表达式与函数声明是不一样的。函数声明要求写出函数名称，而函数表达式并不需要。没有名称的函数表达式也被称为匿名函数。<br> ❑ ES6 新增了类似于函数表达式的箭头函数语法，但两者也有一些重要区别。<br> ❑ JavaScript 中函数定义与调用时的参数极其灵活。arguments 对象，以及 ES6 新增的扩展操作符，可以实现函数定义和调用的完全动态化。<br> ❑ 函数内部也暴露了很多对象和引用，涵盖了函数被谁调用、使用什么调用，以及调用时传入了什么参数等信息。<br> ❑ JavaScript 引擎可以优化符合尾调用条件的函数，以节省栈空间。<br> ❑ 闭包的作用域链中包含自己的一个变量对象，然后是包含函数的变量对象，直到全局上下文的变量对象。<br> ❑ 通常，函数作用域及其中的所有变量在函数执行完毕后都会被销毁。<br> ❑ 闭包在被函数返回之后，其作用域会一直保存在内存中，直到闭包被销毁。<br> ❑ 函数可以在创建之后立即调用，执行其中代码之后却不留下对函数的引用。<br> ❑ 立即调用的函数表达式如果不在包含作用域中将返回值赋给一个变量，则其包含的所有变量都会被销毁。<br> ❑ 虽然 JavaScript 没有私有对象属性的概念，但可以使用闭包实现公共方法，访问位于包含作用域中定义的变量。<br> ❑ 可以访问私有变量的公共方法叫作特权方法。<br> ❑ 特权方法可以使用构造函数或原型模式通过自定义类型中实现，也可以使用模块模式或模块增强模式在单例对象上实现。</p></div></div></main><!----><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><!----><p class="copyright" data-v-e315a0ad>Copyright © 2025- LBJhui</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"guides_framework_browser_network_2.http和https.md\":\"DeOzL0zp\",\"guides_framework_browser_network_3.7 种常见的前端攻击.md\":\"CdLqIj_z\",\"guides_framework_engineering_1.打包时自动移除console.md\":\"gAL-LCFN\",\"guides_framework_engineering_2.如何修改npm包部分功能.md\":\"DPlrAnjR\",\"guides_framework_engineering_3.日志打印规范.md\":\"Bk1D6wvk\",\"guides_framework_engineering_readme.md\":\"BNCBAmjO\",\"guides_framework_nginx_1.nginx 常用的基础配置.md\":\"DqNSboH_\",\"guides_framework_vue_1.vue3_vite实现跨域请求.md\":\"Bl96pz9v\",\"guides_framework_vue_2.vue-router钩子.md\":\"BpdLZzMR\",\"guides_framework_vue_readme.md\":\"Dj4At1VV\",\"guides_interview_1.字符串数组模糊搜索.md\":\"C0cUdzed\",\"guides_interview_2.无感刷新token.md\":\"CSELe7cY\",\"guides_interview_代码输出.md\":\"Q9wOed8N\",\"guides_interview_编码题.md\":\"BFnBoNly\",\"guides_language-basic_css_1.css grid 网格布局教程.md\":\"COQQz8_l\",\"guides_language-basic_css_2.等高布局.md\":\"CT865llu\",\"guides_language-basic_css_3.link 和 @import 有何区别.md\":\"C0dvAFUl\",\"guides_language-basic_css_4.选择器优先级.md\":\"wum_62vt\",\"guides_language-basic_css_5.bfc.md\":\"BZrcTACI\",\"guides_language-basic_css_6.css交互属性.md\":\"BvYTYbYI\",\"guides_language-basic_css_7.css 中隐藏页面元素的几种方式和区别.md\":\"LYzvILjk\",\"guides_language-basic_css_8.css 伪类和伪元素.md\":\"Bo64vXdd\",\"guides_language-basic_css_readme.md\":\"BtB85Srt\",\"guides_language-basic_html_1.资源提示符.md\":\"CYU64YdD\",\"guides_language-basic_html_readme.md\":\"CGdHUphf\",\"guides_language-basic_javascript_2.点击穿透.md\":\"CixOCBMw\",\"guides_language-basic_javascript_5.内存泄漏.md\":\"CN3OXOTs\",\"guides_language-basic_javascript_readme.md\":\"BmCSeqhX\",\"guides_language-basic_javascript_对象属性.md\":\"DmLRMrTd\",\"guides_language-basic_javascript_工具函数.md\":\"BpneNyi_\",\"guides_language-basic_javascript_柯里化.md\":\"CF4CVsVU\",\"guides_language-basic_typescript_1.typescript 快速入门.md\":\"CrauEnsf\",\"guides_language-basic_typescript_2.装饰器.md\":\"DcLzIR8K\",\"guides_language-basic_typescript_3.使用infer封装通用类型工具.md\":\"CRPLjvGa\",\"guides_language-basic_typescript_readme.md\":\"DWBxqJWR\",\"guides_others_code_1.文字阴影.md\":\"D6rHBcvB\",\"guides_others_code_2.单行居中两行居左多行省略.md\":\"CDAb9gZF\",\"guides_others_code_3.单标签左边竖条的实现方式.md\":\"T874RP_6\",\"guides_others_code_4.css下划线动画.md\":\"Bl1zbT08\",\"guides_others_code_5.交错排列的文字.md\":\"mWkUXgKB\",\"guides_others_code_6.重复渐变的边框.md\":\"DxRhq16B\",\"guides_others_code_7.模拟 material 文本框.md\":\"BxomUXt0\",\"guides_others_code_风骚操作.md\":\"-P32WPOP\",\"index.md\":\"DbV9OEBW\",\"website_framework_browser_network_1.浏览器指纹.md\":\"63r2vOH3\",\"website_language_git_1.删除历史所有commit.md\":\"Be0hiEEz\",\"website_language_git_readme.md\":\"Dz33aLOV\",\"website_language_javascript_1.变量声明(var_let和const).md\":\"Bt2vHxEX\",\"website_language_javascript_2.你不知道的undefined.md\":\"Cl_nMNlU\",\"website_language_javascript_3.箭头函数与普通函数的区别.md\":\"70xldk3i\",\"website_language_javascript_4.console命令以及用法.md\":\"B0IevRf-\",\"website_language_javascript_5.动态执行js.md\":\"DfS9zMsd\",\"website_language_javascript_high-performance javascript_第10章 函数.md\":\"B_Uwibq5\",\"website_language_javascript_high-performance javascript_第11章 期约(promise)与异步函数.md\":\"eFVLM_4R\",\"website_language_javascript_high-performance javascript_第12章 bom.md\":\"BHyZWPaI\",\"website_language_javascript_high-performance javascript_第13章 客户端检测.md\":\"BwtTu2LH\",\"website_language_javascript_high-performance javascript_第14章 dom.md\":\"CJxH_jJW\",\"website_language_javascript_high-performance javascript_第15章 dom扩展.md\":\"BH5DcxiT\",\"website_language_javascript_high-performance javascript_第16章 dom2和dom3.md\":\"oGV9-3ZG\",\"website_language_javascript_high-performance javascript_第17章 事件.md\":\"CWyR2snf\",\"website_language_javascript_high-performance javascript_第18章 动画与canvas图形.md\":\"Bmhyt5K-\",\"website_language_javascript_high-performance javascript_第19章 表单脚本.md\":\"DyB9mOw6\",\"website_language_javascript_high-performance javascript_第1章 什么是javascript.md\":\"CSGGdtrT\",\"website_language_javascript_high-performance javascript_第20章 javascriptapi.md\":\"BK89vlsO\",\"website_language_javascript_high-performance javascript_第21章 错误处理与调试.md\":\"ClnDDc4E\",\"website_language_javascript_high-performance javascript_第22章 处理xml.md\":\"rVluJK82\",\"website_language_javascript_high-performance javascript_第23章 json.md\":\"BDAKA4S1\",\"website_language_javascript_high-performance javascript_第24章 网络请求与远程资源.md\":\"CLIUwNeM\",\"website_language_javascript_high-performance javascript_第2章 html中的javascript.md\":\"CBTOZ3BM\",\"website_language_javascript_high-performance javascript_第3章 语言基础.md\":\"BMWFxeLf\",\"website_language_javascript_high-performance javascript_第4章 变量、作用域与内存.md\":\"CukRZBpo\",\"website_language_javascript_high-performance javascript_第5章 基本引用类型.md\":\"rRFK-HJx\",\"website_language_javascript_high-performance javascript_第6章 集合引用类型.md\":\"Co1SBwD4\",\"website_language_javascript_high-performance javascript_第7章 迭代器与生成器.md\":\"CAGHPZLS\",\"website_language_javascript_high-performance javascript_第8章 对象、类与面向对象编程.md\":\"_YdwkRhW\",\"website_language_javascript_high-performance javascript_第9章 代理与反射.md\":\"CgYQB-BK\",\"website_leetcode_0. list.md\":\"L4AXk8Xq\",\"website_leetcode_1. 两数之和.md\":\"B0n33RMM\",\"website_leetcode_100. 相同的树.md\":\"BZDshBRr\",\"website_leetcode_101. 对称二叉树.md\":\"v8ASD5Fs\",\"website_leetcode_104. 二叉树的最大深度.md\":\"DIQgojbW\",\"website_leetcode_108. 将有序数组转换为二叉搜索树.md\":\"CbT-Kzns\",\"website_leetcode_11. 盛最多水的容器.md\":\"DEzKrvST\",\"website_leetcode_110. 平衡二叉树.md\":\"CTMd9Gpt\",\"website_leetcode_111. 二叉树的最小深度.md\":\"BJ9jq18P\",\"website_leetcode_112. 路径总和.md\":\"ANOC725u\",\"website_leetcode_118. 杨辉三角.md\":\"DazFMs1M\",\"website_leetcode_119. 杨辉三角 ii.md\":\"CKEFPse3\",\"website_leetcode_12. 整数转罗马数字.md\":\"tXo2qIWx\",\"website_leetcode_121. 买卖股票的最佳时机.md\":\"BsRCv93g\",\"website_leetcode_125. 验证回文串.md\":\"DdvizKMA\",\"website_leetcode_13. 罗马数字转整数.md\":\"TDaXoTPV\",\"website_leetcode_136. 只出现一次的数字.md\":\"tUGq7fBV\",\"website_leetcode_14. 最长公共前缀.md\":\"DN13hqMp\",\"website_leetcode_141. 环形链表.md\":\"BST75auu\",\"website_leetcode_144. 二叉树的前序遍历.md\":\"ZDn-pyf4\",\"website_leetcode_145. 二叉树的后序遍历.md\":\"KA7TICQr\",\"website_leetcode_15. 三数之和.md\":\"DfWA6TYI\",\"website_leetcode_155. 最小栈.md\":\"DHmSRVmb\",\"website_leetcode_16. 最接近的三数之和.md\":\"D0WNHosG\",\"website_leetcode_160. 相交链表.md\":\"DalOVS-n\",\"website_leetcode_168. excel 表列名称.md\":\"0a2mm_ji\",\"website_leetcode_169. 多数元素.md\":\"DeGwhC8y\",\"website_leetcode_17. 电话号码的字母组合.md\":\"C4oVLojc\",\"website_leetcode_171. excel 表列序号.md\":\"ChSQXajC\",\"website_leetcode_18. 四数之和.md\":\"CUU6Hoo7\",\"website_leetcode_19. 删除链表的倒数第 n 个结点.md\":\"D0U6N49H\",\"website_leetcode_190. 颠倒二进制位.md\":\"B4R0A5RG\",\"website_leetcode_198. 打家劫舍.md\":\"B8gAgeAs\",\"website_leetcode_2. 两数相加.md\":\"Dy9qvvAT\",\"website_leetcode_20. 有效的括号.md\":\"Dngbd0tR\",\"website_leetcode_202. 快乐数.md\":\"CKXgnNgU\",\"website_leetcode_203. 移除链表元素.md\":\"sTo2szr3\",\"website_leetcode_205. 同构字符串.md\":\"eAV6yrwB\",\"website_leetcode_206. 反转链表.md\":\"CiLsend_\",\"website_leetcode_21. 合并两个有序链表.md\":\"qi0Ercbf\",\"website_leetcode_217. 存在重复元素.md\":\"aYUb-WyE\",\"website_leetcode_219. 存在重复元素 ii.md\":\"DTL3L8Vg\",\"website_leetcode_22. 括号生成.md\":\"BCF8Q1gU\",\"website_leetcode_222. 完全二叉树的节点个数.md\":\"BOZ04bgQ\",\"website_leetcode_225. 用队列实现栈.md\":\"DZvIKKUV\",\"website_leetcode_226. 翻转二叉树.md\":\"DgR7aWJR\",\"website_leetcode_228. 汇总区间.md\":\"D4nY2jip\",\"website_leetcode_231. 2 的幂.md\":\"DqGXp-4w\",\"website_leetcode_232. 用栈实现队列.md\":\"Dlp8hpzw\",\"website_leetcode_234. 回文链表.md\":\"BkZwPoE6\",\"website_leetcode_24. 两两交换链表中的节点.md\":\"BLonEzvn\",\"website_leetcode_242. 有效的字母异位词.md\":\"C41Shzd0\",\"website_leetcode_257. 二叉树的所有路径.md\":\"BV8pW74W\",\"website_leetcode_258. 各位相加.md\":\"DciaVx2o\",\"website_leetcode_26. 删除有序数组中的重复项.md\":\"Cxcg9-ru\",\"website_leetcode_268. 丢失的数字.md\":\"DprUY2Re\",\"website_leetcode_27. 移除元素.md\":\"BQyU_IIp\",\"website_leetcode_278. 第一个错误的版本.md\":\"C8LaaczP\",\"website_leetcode_28. 找出字符串中第一个匹配项的下标.md\":\"CYbLVyB5\",\"website_leetcode_283. 移动零.md\":\"Bo74Ii4J\",\"website_leetcode_290. 单词规律.md\":\"CNkc59eH\",\"website_leetcode_3. 无重复字符的最长子串.md\":\"Cr6yn_PV\",\"website_leetcode_326. 3 的幂.md\":\"QIOgqKV1\",\"website_leetcode_338. 比特位计数.md\":\"CUxZ_IyX\",\"website_leetcode_342. 4的幂.md\":\"CpHAMabm\",\"website_leetcode_344. 反转字符串.md\":\"B-raVJpw\",\"website_leetcode_345. 反转字符串中的元音字母.md\":\"CuASnpW8\",\"website_leetcode_349. 两个数组的交集.md\":\"Err4m0a8\",\"website_leetcode_35. 搜索插入位置.md\":\"CNZxywTR\",\"website_leetcode_350. 两个数组的交集 ii.md\":\"Bprg3Haw\",\"website_leetcode_4. 寻找两个正序数组的中位数.md\":\"C6aLJYBq\",\"website_leetcode_41. 缺失的第一个正数.md\":\"DImvaSq9\",\"website_leetcode_46. 全排列.md\":\"C2Gotvs2\",\"website_leetcode_47. 全排列 ii.md\":\"B_Ba1wSs\",\"website_leetcode_48. 旋转图像.md\":\"Bt70lqAL\",\"website_leetcode_49. 字母异位词分组.md\":\"anGq_P7V\",\"website_leetcode_5. 最长回文子串.md\":\"NxIx1D3i\",\"website_leetcode_50. pow(x_ n).md\":\"DtMWqsMg\",\"website_leetcode_500. 键盘行.md\":\"BLkXUOKf\",\"website_leetcode_58. 最后一个单词的长度.md\":\"DXnvMprA\",\"website_leetcode_6. z 字形变换.md\":\"C3jfqxZ3\",\"website_leetcode_62. 不同路径.md\":\"CM2YGd4q\",\"website_leetcode_66. 加一.md\":\"DLqGa4FM\",\"website_leetcode_67. 二进制求和.md\":\"z2xcuGZV\",\"website_leetcode_69. x 的平方根.md\":\"CfOtS1j0\",\"website_leetcode_7. 整数反转.md\":\"CrlCxpLx\",\"website_leetcode_70. 爬楼梯.md\":\"Bcw2YnBv\",\"website_leetcode_8. 字符串转换整数 (atoi).md\":\"BcPENDRP\",\"website_leetcode_83. 删除排序链表中的重复元素.md\":\"DF6NHciy\",\"website_leetcode_88. 合并两个有序数组.md\":\"D-zZ5gaw\",\"website_leetcode_9. 回文数.md\":\"yyZCZ85d\",\"website_leetcode_94. 二叉树的中序遍历.md\":\"CdgEWvFq\",\"website_leetcode_least-recently-used.md\":\"7gAx3nXL\",\"website_leetcode_全组合判断.md\":\"Btnvc8CE\",\"website_leetcode_最长递增子序列.md\":\"DOwESmZ3\",\"website_leetcode_漩涡型二维数组.md\":\"CGxLaqe7\",\"website_more_bookmark.md\":\"CyV55LTo\",\"website_more_emoji.md\":\"BKMkgnvT\",\"website_more_markdown-latex.md\":\"BeDsbT29\",\"website_more_others_1.vscode.md\":\"DsdnC4bJ\",\"website_more_others_2.语义化版本.md\":\"DAeEAJMV\",\"website_more_python_1.python-pip源.md\":\"CDp1hwTf\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"LBJhui-blog\",\"description\":\"A VitePress site\",\"base\":\"/LBJhui-blog/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/my-logo.svg\",\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"前端基础\",\"items\":[{\"text\":\"JavaScript\",\"link\":\"/website/language/JavaScript/1.变量声明(var,let和const).md\"},{\"text\":\"Git\",\"link\":\"/website/language/Git/1.删除历史所有commit.md\"}]},{\"text\":\"框架&库\",\"items\":[{\"text\":\"浏览器和网络\",\"link\":\"/website/framework/browser&network/1.浏览器指纹.md\"}]},{\"text\":\"Leetcode算法\",\"link\":\"/website/Leetcode/0. list.md\"},{\"text\":\"更多\",\"items\":[{\"text\":\"python\",\"link\":\"/website/more/python/1.python-pip源.md\"},{\"text\":\"网址收藏\",\"link\":\"/website/more/bookmark.md\"}]}],\"sidebar\":{\"/website/Leetcode/\":{\"base\":\"/website/Leetcode/\",\"items\":[{\"text\":\"0. list\",\"link\":\"0. list.md\"},{\"text\":\"1. 两数之和\",\"link\":\"1. 两数之和.md\"},{\"text\":\"2. 两数相加\",\"link\":\"2. 两数相加.md\"},{\"text\":\"3. 无重复字符的最长子串\",\"link\":\"3. 无重复字符的最长子串.md\"},{\"text\":\"4. 寻找两个正序数组的中位数\",\"link\":\"4. 寻找两个正序数组的中位数.md\"},{\"text\":\"5. 最长回文子串\",\"link\":\"5. 最长回文子串.md\"},{\"text\":\"6. Z 字形变换\",\"link\":\"6. Z 字形变换.md\"},{\"text\":\"7. 整数反转\",\"link\":\"7. 整数反转.md\"},{\"text\":\"8. 字符串转换整数 (atoi)\",\"link\":\"8. 字符串转换整数 (atoi).md\"},{\"text\":\"9. 回文数\",\"link\":\"9. 回文数.md\"},{\"text\":\"11. 盛最多水的容器\",\"link\":\"11. 盛最多水的容器.md\"},{\"text\":\"12. 整数转罗马数字\",\"link\":\"12. 整数转罗马数字.md\"},{\"text\":\"13. 罗马数字转整数\",\"link\":\"13. 罗马数字转整数.md\"},{\"text\":\"14. 最长公共前缀\",\"link\":\"14. 最长公共前缀.md\"},{\"text\":\"15. 三数之和\",\"link\":\"15. 三数之和.md\"},{\"text\":\"16. 最接近的三数之和\",\"link\":\"16. 最接近的三数之和.md\"},{\"text\":\"17. 电话号码的字母组合\",\"link\":\"17. 电话号码的字母组合.md\"},{\"text\":\"18. 四数之和\",\"link\":\"18. 四数之和.md\"},{\"text\":\"19. 删除链表的倒数第 N 个结点\",\"link\":\"19. 删除链表的倒数第 N 个结点.md\"},{\"text\":\"20. 有效的括号\",\"link\":\"20. 有效的括号.md\"},{\"text\":\"21. 合并两个有序链表\",\"link\":\"21. 合并两个有序链表.md\"},{\"text\":\"22. 括号生成\",\"link\":\"22. 括号生成.md\"},{\"text\":\"24. 两两交换链表中的节点\",\"link\":\"24. 两两交换链表中的节点.md\"},{\"text\":\"26. 删除有序数组中的重复项\",\"link\":\"26. 删除有序数组中的重复项.md\"},{\"text\":\"27. 移除元素\",\"link\":\"27. 移除元素.md\"},{\"text\":\"28. 找出字符串中第一个匹配项的下标\",\"link\":\"28. 找出字符串中第一个匹配项的下标.md\"},{\"text\":\"35. 搜索插入位置\",\"link\":\"35. 搜索插入位置.md\"},{\"text\":\"41. 缺失的第一个正数\",\"link\":\"41. 缺失的第一个正数.md\"},{\"text\":\"46. 全排列\",\"link\":\"46. 全排列.md\"},{\"text\":\"47. 全排列 II\",\"link\":\"47. 全排列 II.md\"},{\"text\":\"48. 旋转图像\",\"link\":\"48. 旋转图像.md\"},{\"text\":\"49. 字母异位词分组\",\"link\":\"49. 字母异位词分组.md\"},{\"text\":\"50. Pow(x, n)\",\"link\":\"50. Pow(x, n).md\"},{\"text\":\"58. 最后一个单词的长度\",\"link\":\"58. 最后一个单词的长度.md\"},{\"text\":\"62. 不同路径\",\"link\":\"62. 不同路径.md\"},{\"text\":\"66. 加一\",\"link\":\"66. 加一.md\"},{\"text\":\"67. 二进制求和\",\"link\":\"67. 二进制求和.md\"},{\"text\":\"69. x 的平方根\",\"link\":\"69. x 的平方根.md\"},{\"text\":\"70. 爬楼梯\",\"link\":\"70. 爬楼梯.md\"},{\"text\":\"83. 删除排序链表中的重复元素\",\"link\":\"83. 删除排序链表中的重复元素.md\"},{\"text\":\"88. 合并两个有序数组\",\"link\":\"88. 合并两个有序数组.md\"},{\"text\":\"94. 二叉树的中序遍历\",\"link\":\"94. 二叉树的中序遍历.md\"},{\"text\":\"100. 相同的树\",\"link\":\"100. 相同的树.md\"},{\"text\":\"101. 对称二叉树\",\"link\":\"101. 对称二叉树.md\"},{\"text\":\"104. 二叉树的最大深度\",\"link\":\"104. 二叉树的最大深度.md\"},{\"text\":\"108. 将有序数组转换为二叉搜索树\",\"link\":\"108. 将有序数组转换为二叉搜索树.md\"},{\"text\":\"110. 平衡二叉树\",\"link\":\"110. 平衡二叉树.md\"},{\"text\":\"111. 二叉树的最小深度\",\"link\":\"111. 二叉树的最小深度.md\"},{\"text\":\"112. 路径总和\",\"link\":\"112. 路径总和.md\"},{\"text\":\"118. 杨辉三角\",\"link\":\"118. 杨辉三角.md\"},{\"text\":\"119. 杨辉三角 II\",\"link\":\"119. 杨辉三角 II.md\"},{\"text\":\"121. 买卖股票的最佳时机\",\"link\":\"121. 买卖股票的最佳时机.md\"},{\"text\":\"125. 验证回文串\",\"link\":\"125. 验证回文串.md\"},{\"text\":\"136. 只出现一次的数字\",\"link\":\"136. 只出现一次的数字.md\"},{\"text\":\"141. 环形链表\",\"link\":\"141. 环形链表.md\"},{\"text\":\"144. 二叉树的前序遍历\",\"link\":\"144. 二叉树的前序遍历.md\"},{\"text\":\"145. 二叉树的后序遍历\",\"link\":\"145. 二叉树的后序遍历.md\"},{\"text\":\"155. 最小栈\",\"link\":\"155. 最小栈.md\"},{\"text\":\"160. 相交链表\",\"link\":\"160. 相交链表.md\"},{\"text\":\"168. Excel 表列名称\",\"link\":\"168. Excel 表列名称.md\"},{\"text\":\"169. 多数元素\",\"link\":\"169. 多数元素.md\"},{\"text\":\"171. Excel 表列序号\",\"link\":\"171. Excel 表列序号.md\"},{\"text\":\"190. 颠倒二进制位\",\"link\":\"190. 颠倒二进制位.md\"},{\"text\":\"198. 打家劫舍\",\"link\":\"198. 打家劫舍.md\"},{\"text\":\"202. 快乐数\",\"link\":\"202. 快乐数.md\"},{\"text\":\"203. 移除链表元素\",\"link\":\"203. 移除链表元素.md\"},{\"text\":\"205. 同构字符串\",\"link\":\"205. 同构字符串.md\"},{\"text\":\"206. 反转链表\",\"link\":\"206. 反转链表.md\"},{\"text\":\"217. 存在重复元素\",\"link\":\"217. 存在重复元素.md\"},{\"text\":\"219. 存在重复元素 II\",\"link\":\"219. 存在重复元素 II.md\"},{\"text\":\"222. 完全二叉树的节点个数\",\"link\":\"222. 完全二叉树的节点个数.md\"},{\"text\":\"225. 用队列实现栈\",\"link\":\"225. 用队列实现栈.md\"},{\"text\":\"226. 翻转二叉树\",\"link\":\"226. 翻转二叉树.md\"},{\"text\":\"228. 汇总区间\",\"link\":\"228. 汇总区间.md\"},{\"text\":\"231. 2 的幂\",\"link\":\"231. 2 的幂.md\"},{\"text\":\"232. 用栈实现队列\",\"link\":\"232. 用栈实现队列.md\"},{\"text\":\"234. 回文链表\",\"link\":\"234. 回文链表.md\"},{\"text\":\"242. 有效的字母异位词\",\"link\":\"242. 有效的字母异位词.md\"},{\"text\":\"257. 二叉树的所有路径\",\"link\":\"257. 二叉树的所有路径.md\"},{\"text\":\"258. 各位相加\",\"link\":\"258. 各位相加.md\"},{\"text\":\"268. 丢失的数字\",\"link\":\"268. 丢失的数字.md\"},{\"text\":\"278. 第一个错误的版本\",\"link\":\"278. 第一个错误的版本.md\"},{\"text\":\"283. 移动零\",\"link\":\"283. 移动零.md\"},{\"text\":\"290. 单词规律\",\"link\":\"290. 单词规律.md\"},{\"text\":\"326. 3 的幂\",\"link\":\"326. 3 的幂.md\"},{\"text\":\"338. 比特位计数\",\"link\":\"338. 比特位计数.md\"},{\"text\":\"342. 4的幂\",\"link\":\"342. 4的幂.md\"},{\"text\":\"344. 反转字符串\",\"link\":\"344. 反转字符串.md\"},{\"text\":\"345. 反转字符串中的元音字母\",\"link\":\"345. 反转字符串中的元音字母.md\"},{\"text\":\"349. 两个数组的交集\",\"link\":\"349. 两个数组的交集.md\"},{\"text\":\"350. 两个数组的交集 II\",\"link\":\"350. 两个数组的交集 II.md\"},{\"text\":\"500. 键盘行\",\"link\":\"500. 键盘行.md\"},{\"text\":\"least-recently-used\",\"link\":\"least-recently-used.md\"},{\"text\":\"全组合判断\",\"link\":\"全组合判断.md\"},{\"text\":\"最长递增子序列\",\"link\":\"最长递增子序列.md\"},{\"text\":\"漩涡型二维数组\",\"link\":\"漩涡型二维数组.md\"}]},\"/website/more/\":{\"base\":\"/website/more/\",\"items\":[{\"text\":\"bookmark\",\"link\":\"bookmark.md\"},{\"text\":\"emoji\",\"link\":\"emoji.md\"},{\"text\":\"markdown-latex\",\"link\":\"markdown-latex.md\"}]},\"/website/framework/browser&network/\":{\"base\":\"/website/framework/browser&network/\",\"items\":[{\"text\":\"1.浏览器指纹\",\"link\":\"1.浏览器指纹.md\"}]},\"/website/language/Git/\":{\"base\":\"/website/language/Git/\",\"items\":[{\"text\":\"1.删除历史所有commit\",\"link\":\"1.删除历史所有commit.md\"},{\"text\":\"README\",\"link\":\"README.md\"}]},\"/website/language/JavaScript/\":[{\"base\":\"/website/language/JavaScript/High-Performance JavaScript/\",\"items\":[{\"text\":\"第1章 什么是JavaScript\",\"link\":\"第1章 什么是JavaScript.md\"},{\"text\":\"第2章 HTML中的JavaScript\",\"link\":\"第2章 HTML中的JavaScript.md\"},{\"text\":\"第3章 语言基础\",\"link\":\"第3章 语言基础.md\"},{\"text\":\"第4章 变量、作用域与内存\",\"link\":\"第4章 变量、作用域与内存.md\"},{\"text\":\"第5章 基本引用类型\",\"link\":\"第5章 基本引用类型.md\"},{\"text\":\"第6章 集合引用类型\",\"link\":\"第6章 集合引用类型.md\"},{\"text\":\"第7章 迭代器与生成器\",\"link\":\"第7章 迭代器与生成器.md\"},{\"text\":\"第8章 对象、类与面向对象编程\",\"link\":\"第8章 对象、类与面向对象编程.md\"},{\"text\":\"第9章 代理与反射\",\"link\":\"第9章 代理与反射.md\"},{\"text\":\"第10章 函数\",\"link\":\"第10章 函数.md\"},{\"text\":\"第11章 期约(promise)与异步函数\",\"link\":\"第11章 期约(promise)与异步函数.md\"},{\"text\":\"第12章 BOM\",\"link\":\"第12章 BOM.md\"},{\"text\":\"第13章 客户端检测\",\"link\":\"第13章 客户端检测.md\"},{\"text\":\"第14章 DOM\",\"link\":\"第14章 DOM.md\"},{\"text\":\"第15章 DOM扩展\",\"link\":\"第15章 DOM扩展.md\"},{\"text\":\"第16章 DOM2和DOM3\",\"link\":\"第16章 DOM2和DOM3.md\"},{\"text\":\"第17章 事件\",\"link\":\"第17章 事件.md\"},{\"text\":\"第18章 动画与Canvas图形\",\"link\":\"第18章 动画与Canvas图形.md\"},{\"text\":\"第19章 表单脚本\",\"link\":\"第19章 表单脚本.md\"},{\"text\":\"第20章 JavaScriptAPI\",\"link\":\"第20章 JavaScriptAPI.md\"},{\"text\":\"第21章 错误处理与调试\",\"link\":\"第21章 错误处理与调试.md\"},{\"text\":\"第22章 处理XML\",\"link\":\"第22章 处理XML.md\"},{\"text\":\"第23章 JSON\",\"link\":\"第23章 JSON.md\"},{\"text\":\"第24章 网络请求与远程资源\",\"link\":\"第24章 网络请求与远程资源.md\"}],\"text\":\"JavaScript高级程序设计(第4版)\",\"collapsed\":true},{\"base\":\"/website/language/JavaScript/\",\"items\":[{\"text\":\"1.变量声明(var,let和const)\",\"link\":\"1.变量声明(var,let和const).md\"},{\"text\":\"2.你不知道的undefined\",\"link\":\"2.你不知道的undefined.md\"},{\"text\":\"3.箭头函数与普通函数的区别\",\"link\":\"3.箭头函数与普通函数的区别.md\"},{\"text\":\"4.console命令以及用法\",\"link\":\"4.console命令以及用法.md\"},{\"text\":\"5.动态执行JS\",\"link\":\"5.动态执行JS.md\"}],\"text\":\"JavaScript\",\"collapsed\":false}],\"/website/more/others/\":{\"base\":\"/website/more/others/\",\"items\":[{\"text\":\"1.vscode\",\"link\":\"1.vscode.md\"},{\"text\":\"2.语义化版本\",\"link\":\"2.语义化版本.md\"}]},\"/website/more/python/\":{\"base\":\"/website/more/python/\",\"items\":[{\"text\":\"1.python-pip源\",\"link\":\"1.python-pip源.md\"}]}},\"outline\":[2,3],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/LBJhui/LBJhui-blog\"},{\"icon\":{\"svg\":\"<svg t=\\\"1721011213162\\\" class=\\\"icon\\\" viewBox=\\\"0 0 1024 1024\\\" version=\\\"1.1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" p-id=\\\"2207\\\" width=\\\"200\\\" height=\\\"200\\\"><path d=\\\"M512 1024C229.2224 1024 0 794.7776 0 512 0 229.2224 229.2224 0 512 0c282.7776 0 512 229.2224 512 512 0 282.7776-229.2224 512-512 512z m17.066667-413.525333c34.850133 4.352 68.778667 5.12 102.741333 2.0992 23.04-2.048 44.817067-8.362667 64.170667-21.9136 38.212267-26.794667 49.783467-85.1968 24.251733-123.050667-14.626133-21.7088-36.8128-30.344533-60.757333-35.498667-35.054933-7.543467-70.4512-5.751467-105.847467-3.413333-5.666133 0.3584-6.7584 3.072-7.236267 8.209067-3.072 32.682667-6.536533 65.314133-9.813333 97.962666-2.5088 24.814933-4.932267 49.629867-7.509333 75.605334z m53.4016-33.928534c1.962667-20.906667 3.6352-39.338667 5.4272-57.770666 1.553067-15.906133 3.413333-31.778133 4.727466-47.701334 0.3584-4.283733 1.553067-6.656 5.956267-6.382933 15.616 1.041067 31.709867 0.034133 46.728533 3.652267 36.488533 8.823467 48.725333 54.306133 23.3472 83.029333-15.8208 17.902933-36.7616 23.586133-59.255466 25.088-8.465067 0.546133-17.015467 0.085333-26.9312 0.085333zM512 434.295467c-2.184533-0.648533-3.5328-1.1776-4.932267-1.4336-37.717333-6.877867-75.690667-8.328533-113.646933-2.816-20.974933 3.037867-41.0112 9.489067-57.480533 23.330133-22.9888 19.319467-21.640533 46.848 4.4032 62.0032 13.056 7.594667 28.023467 12.509867 42.5984 17.288533 14.08 4.608 28.996267 6.826667 43.144533 11.264 12.5952 3.925333 14.011733 14.318933 3.584 22.306134-3.345067 2.56-7.441067 5.085867-11.537067 5.751466-11.195733 1.826133-22.698667 4.386133-33.826133 3.566934-24.098133-1.774933-48.042667-5.461333-72.5504-8.430934-1.365333 10.615467-2.935467 23.0912-4.5568 35.9424 4.181333 1.365333 7.68 2.730667 11.264 3.618134 33.9456 8.4992 68.386133 9.608533 102.912 5.12 20.087467-2.6112 39.4752-7.901867 56.695467-19.029334 28.603733-18.4832 36.693333-57.1904-4.676267-75.383466-14.506667-6.382933-30.190933-10.410667-45.482667-15.086934-11.4176-3.4816-23.313067-5.614933-34.525866-9.5232-9.7792-3.413333-11.144533-12.202667-3.037867-18.397866 4.6592-3.549867 10.717867-6.997333 16.384-7.3728a480.853333 480.853333 0 0 1 53.384533-0.853334c15.377067 0.699733 30.651733 3.549867 46.4896 5.5296L512 434.295467z m257.143467 2.048L750.933333 614.2976h54.152534c4.778667-45.636267 9.710933-90.7264 14.062933-135.8848 0.6144-6.365867 2.3552-8.840533 8.686933-9.0112 11.434667-0.273067 22.8864-1.979733 34.286934-1.570133 23.722667 0.853333 42.3936 9.728 38.4 43.264-2.901333 24.2688-5.597867 48.571733-8.2432 72.874666-1.092267 10.069333-1.826133 20.189867-2.730667 30.4128h55.330133c3.584-35.259733 7.9872-70.058667 10.496-104.994133 3.413333-47.4624-17.7664-73.3184-64.682666-80.213333-40.96-6.007467-81.339733-0.341333-121.5488 7.133866z m-483.498667 134.6048c-8.738133 1.297067-16.384 2.798933-24.098133 3.4816-25.6512 2.235733-51.319467 3.9424-76.305067-4.266667-13.909333-4.590933-24.6784-12.578133-29.7984-25.9584-7.901867-20.701867 0.887467-47.104 19.831467-60.3136 17.373867-12.117333 37.717333-15.9232 58.453333-15.9232 22.545067-0.017067 45.090133 2.423467 68.232533 3.84L307.2 432.298667c-15.069867-1.723733-29.4912-3.925333-43.997867-4.9152-41.0112-2.798933-80.64 2.6112-117.469866 20.462933-30.020267 14.557867-52.053333 36.010667-58.6752 68.130133-7.850667 38.144 11.537067 69.495467 51.7632 85.845334 19.1488 7.765333 39.287467 12.509867 60.0064 12.5952 24.746667 0.1024 49.493333-1.570133 74.205866-2.952534 3.106133-0.170667 8.311467-2.901333 8.669867-5.034666 1.979733-11.554133 2.730667-23.278933 3.9424-35.464534z\\\" fill=\\\"#DD1700\\\" p-id=\\\"2208\\\"></path></svg>\"},\"link\":\"https://blog.csdn.net/qq_36081714\"}],\"externalLinkIcon\":true,\"footer\":{\"copyright\":\"Copyright © 2025- LBJhui\"},\"docFooter\":{\"prev\":false,\"next\":false}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>
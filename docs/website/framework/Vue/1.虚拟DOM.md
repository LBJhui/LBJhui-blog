# 虚拟 DOM

## 为什么要用到虚拟 DOM

首先，肯定是为了效率。但并不一定用了虚拟 dom 就能提升效率，就比如 svelet 框架，没用虚拟 dom 反而效率更高。

第一点，由于 vue 或者是 react 能做到的最小程度的重新渲染程度范围是‘组件’，所以虚拟 dom 的出现是为了降低重新渲染颗粒度。当数据发生变化时，重新调用 Render 函数，如果里面写的是真实 dom 元素就会大大降低效率。而用虚拟 dom，就会先生成一个虚拟 dom 树，使用 diff 算法，将之前的 dom 树与新的虚拟 dom 树去做对比，只重新渲染发生变化的部分。

第二点就是，解耦运行环境。因为不同的运行环境如移动段或者 pc 端，只有浏览器才有真实 dom，移动端就用不了真实 dom。虚拟 dom 的本质就是一个 js 对象，里面有 props，childrens，children 里面又有 props 和 childrens，像是标签一样嵌套。不同的运行环境就可以来解析这个对象实现页面展示（跨平台性）。
